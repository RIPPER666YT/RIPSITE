<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIPPER | Twitch</title>
    <style>
        body {
            background-color: #000;
            color: #ddd;
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        header {
            background-color: #111;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #9147ff;
        }

        header h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3em;
            margin: 0;
            color: #9147ff;
        }

        header p {
            color: #9147ff;
            margin-top: 10px;
            font-size: 1.2em;
        }

        nav {
            display: flex;
            justify-content: center;
            background-color: #111;
            padding: 10px;
            border-bottom: 2px solid #333;
        }

        nav a {
            color: #ddd;
            text-decoration: none;
            margin: 0 15px;
            font-size: 18px;
            transition: 0.3s;
            font-family: 'Bebas Neue', sans-serif;
        }

        nav a:hover, nav a.active {
            color: #9147ff;
        }

        main {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        h2 {
            color: #9147ff;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }

        .social-grid {
            display: grid;
            gap: 15px;
            margin-top: 30px;
        }

        .social-card {
            display: flex;
            background-color: #111;
            border-radius: 8px;
            overflow: hidden;
            border-left: 4px solid #9147ff;
            transition: all 0.3s ease;
            align-items: center;
            padding: 15px;
            text-decoration: none;
            color: #ddd;
        }

        .social-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(145, 71, 255, 0.3);
            background-color: #0a0a0a;
        }

        .social-icon {
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 70px;
            color: #9147ff;
            font-size: 2em;
        }

        .social-info {
            flex-grow: 1;
        }

        .social-info h4 {
            margin: 0 0 5px 0;
            font-size: 1.3em;
            color: #fff;
        }

        .social-info p {
            margin: 0;
            font-size: 0.9em;
            color: #aaa;
        }

        .status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .online {
            background-color: #00ff7f;
            box-shadow: 0 0 5px #00ff7f;
        }

        .offline {
            background-color: #ff5555;
        }

        footer {
            background-color: #111;
            text-align: center;
            padding: 15px;
            margin-top: 30px;
            border-top: 2px solid #333;
        }

        footer p {
            margin: 0;
            color: #9147ff;
        }

        @media (max-width: 768px) {
            .social-card {
                flex-direction: column;
                text-align: center;
            }
            
            .social-icon {
                padding: 10px;
            }
            
            nav a {
                font-size: 16px;
                margin: 0 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>RIPPER<span class="purple"></span></h1>
        <p>–°—Ç—Ä–∏–º–µ—Ä | –Æ—Ç—É–±–µ—Ä</p>
    </header>

    <nav>
        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="about.html">–û —Å–µ–±–µ</a>
        <a href="youtube.html">YouTube</a>
        <a href="twitch.html" class="active">Twitch</a>
        <a href="3dmodel.html">–ú–æ–∏ –º–æ–¥–µ–ª–∏</a>
    </nav>

    <main>
        <section class="twitch-stats">
            <h2>–ú–æ–π Twitch</h2>
            
            <div class="social-grid">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç—Ä–∏–º–∞ -->
                <a href="https://www.twitch.tv/ripper_cmertanoc" target="_blank" class="social-card" id="stream-card">
                    <div class="social-icon">üî¥</div>
                    <div class="social-info">
                        <h4><span class="status offline"></span>–°—Ç–∞—Ç—É—Å —Å—Ç—Ä–∏–º–∞</h4>
                        <p id="stream-status-text">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...</p>
                    </div>
                </a>

                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ç—Ä–∏–º–∞ -->
                <a href="https://www.twitch.tv/ripper_cmertanoc/videos" target="_blank" class="social-card" id="last-stream-card">
                    <div class="social-icon">üìÖ</div>
                    <div class="social-info">
                        <h4>–ü–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç—Ä–∏–º</h4>
                        <p id="last-stream-date">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç—ã...</p>
                    </div>
                </a>

                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ -->
                <a href="https://www.twitch.tv/ripper_cmertanoc/about" target="_blank" class="social-card" id="followers-card">
                    <div class="social-icon">‚ù§Ô∏è</div>
                    <div class="social-info">
                        <h4>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</h4>
                        <p id="followers-count">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                    </div>
                </a>

                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–ø–æ–≤ -->
                <a href="https://www.twitch.tv/ripper_cmertanoc/clips" target="_blank" class="social-card">
                    <div class="social-icon">üé•</div>
                    <div class="social-info">
                        <h4>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–ª–∏–ø—ã</h4>
                        <p>–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–ª–∏–ø—ã</p>
                    </div>
                </a>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 RIPPER | –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</p>
    </footer>

    <script>
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Twitch API
        const CLIENT_ID = 'z8d0r6o7zk5jqw3lrep9wt7joplomw';
        const ACCESS_TOKEN = 'y0n0955m5lzyphj8d4mya4omufjzy7';
        const CHANNEL_NAME = 'ripper_cmertanoc';
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        async function loadTwitchData() {
            try {
                // –ü–æ–ª—É—á–∞–µ–º ID –∫–∞–Ω–∞–ª–∞
                const userId = await getUserId();
                if (!userId) return;
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
                await Promise.all([
                    loadStreamStatus(userId),
                    loadFollowers(userId),
                    loadLastStreamDate(userId)
                ]);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                document.getElementById('stream-status-text').textContent = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö";
            }
        }
        
        // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function getUserId() {
            const response = await fetch(`https://api.twitch.tv/helix/users?login=${CHANNEL_NAME}`, {
                headers: {
                    'Client-ID': CLIENT_ID,
                    'Authorization': `Bearer ${ACCESS_TOKEN}`
                }
            });
            
            if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            
            const data = await response.json();
            return data.data?.[0]?.id;
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç—É—Å —Å—Ç—Ä–∏–º–∞
        async function loadStreamStatus(userId) {
            const response = await fetch(`https://api.twitch.tv/helix/streams?user_id=${userId}`, {
                headers: {
                    'Client-ID': CLIENT_ID,
                    'Authorization': `Bearer ${ACCESS_TOKEN}`
                }
            });
            
            if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç—Ä–∏–º–∞');
            
            const data = await response.json();
            const statusElement = document.getElementById('stream-status-text');
            const statusIndicator = document.querySelector('#stream-card .status');
            
            if (data.data && data.data.length > 0) {
                const stream = data.data[0];
                statusElement.textContent = `–í —ç—Ñ–∏—Ä–µ: ${stream.title}`;
                statusIndicator.className = "status online";
                document.getElementById('stream-card').href = `https://www.twitch.tv/${CHANNEL_NAME}`;
            } else {
                statusElement.textContent = "–°–µ–π—á–∞—Å –æ—Ñ—Ñ–ª–∞–π–Ω";
                statusIndicator.className = "status offline";
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
        async function loadFollowers(userId) {
            const response = await fetch(`https://api.twitch.tv/helix/channels/followers?broadcaster_id=${userId}&first=1`, {
                headers: {
                    'Client-ID': CLIENT_ID,
                    'Authorization': `Bearer ${ACCESS_TOKEN}`
                }
            });
            
            if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤');
            
            const data = await response.json();
            const followersElement = document.getElementById('followers-count');
            
            if (data.total) {
                followersElement.textContent = `${data.total.toLocaleString()} –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤`;
            } else {
                followersElement.textContent = "–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ";
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ç—Ä–∏–º–∞
        async function loadLastStreamDate(userId) {
            const response = await fetch(`https://api.twitch.tv/helix/videos?user_id=${userId}&first=1&type=archive`, {
                headers: {
                    'Client-ID': CLIENT_ID,
                    'Authorization': `Bearer ${ACCESS_TOKEN}`
                }
            });
            
            if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ç—Ä–∏–º–∞');
            
            const data = await response.json();
            const dateElement = document.getElementById('last-stream-date');
            
            if (data.data && data.data.length > 0) {
                const lastStreamDate = new Date(data.data[0].created_at);
                dateElement.textContent = lastStreamDate.toLocaleString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç—Ä–∏–º
                document.getElementById('last-stream-card').href = `https://www.twitch.tv/videos/${data.data[0].id}`;
            } else {
                dateElement.textContent = "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö";
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', loadTwitchData);
    </script>
</body>
</html>